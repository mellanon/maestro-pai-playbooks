# Document 2: Extract Changelog from SpecFlow Artifacts

## Context

- **Playbook**: SpecFlow PR Creator
- **Agent**: {{AGENT_NAME}}
- **Project**: {{AGENT_PATH}}
- **Date**: {{DATE}}
- **Working Folder**: {{AUTORUN_FOLDER}}

## Purpose

Build a rich, structured changelog by extracting information from SpecFlow spec artifacts. This leverages the detailed work already captured during the specify → plan → tasks → implement workflow.

## Prerequisites

- `{{AUTORUN_FOLDER}}/SPECFLOW_CONTEXT.md` exists with completed features list

## Tasks

### Task 1: Load Feature Context

- [ ] **Read SPECFLOW_CONTEXT.md**: Load the list of completed features and their spec paths

### Task 2: Extract from Spec Artifacts

For each completed feature:

- [ ] **Read spec.md**: Extract:
  - Feature overview/problem statement
  - User scenarios
  - Acceptance criteria (success criteria)

- [ ] **Read plan.md**: Extract:
  - Architecture decisions
  - Technology choices
  - Data model changes

- [ ] **Read tasks.md**: Extract:
  - Total task count
  - Task groups
  - Dependencies between features

- [ ] **Read docs.md**: Extract:
  - What was added/changed
  - New exports/APIs
  - Integration points

- [ ] **Read verify.md**: Extract:
  - Test counts
  - Verification results
  - Real output (not placeholders)

### Task 3: Extract Quality Metrics

- [ ] **Query evaluation results** (if available):

  Check `.specflow/evals.db` for:
  - Spec quality scores
  - Plan quality scores
  - Pass@k metrics
  - Revision count

### Task 4: Create Changelog Document

- [ ] **Write CHANGELOG.md**: Create `{{AUTORUN_FOLDER}}/CHANGELOG.md`:

```markdown
# Changelog: {{AGENT_NAME}} Feature Branch

Generated: {{DATE}}
Branch: [current branch]
Target: develop

---

## Summary

This branch implements [N] features from the SpecFlow queue:

| Feature | Description | Tests | Quality |
|---------|-------------|-------|---------|
| F-1 | Event Schema and Types | 105 | 89% |
| F-2 | Event Logging Library | 45 | 92% |

**Total Changes:**
- Features implemented: [N]
- Tests added: [total]
- Files changed: [count]
- Lines: +[added]/-[removed]

---

## Feature Details

### F-1: [Feature Name]

**Problem Solved:**
[Extracted from spec.md overview]

**What Was Added:**
[Extracted from docs.md]

**Architecture Decisions:**
[Key points from plan.md]

**Acceptance Criteria Met:**
- ✓ [Criterion 1 from spec.md]
- ✓ [Criterion 2 from spec.md]
- ✓ [Criterion 3 from spec.md]

**Tasks Completed:**
| Task | Description | Status |
|------|-------------|--------|
| T-1.1 | Core interfaces | ✓ |
| T-1.2 | Event types | ✓ |

**Test Coverage:**
- Unit tests: [count]
- Integration tests: [count]
- Total expect() calls: [count]

**Quality Gates:**
- Spec quality: [score]%
- Plan quality: [score]%
- Doctorow Gate: [pass/fail]

---

### F-2: [Feature Name]

[Same structure repeated for each feature]

---

## Breaking Changes

[List any breaking changes with migration notes]

- **None** (if no breaking changes)

## Dependencies Added

[List new dependencies if any]

- **None** (if no new dependencies)

## Configuration Changes

[List any new config options or env vars]

- **None** (if no config changes)

## Upgrade Notes

[Instructions for upgrading from previous version]

---

## Quality Summary

| Metric | Value |
|--------|-------|
| Total features | [N] |
| Spec quality (avg) | [X]% |
| Plan quality (avg) | [X]% |
| Tests passing | 100% |
| Doctorow Gate | All passed |

---

*Generated by SpecFlow PR Creator Playbook*
```

### Task 5: Verify Changelog Completeness

- [ ] **Check all completed features are documented**
- [ ] **Verify no placeholder text remains** (e.g., `[TODO]`, `[TBD]`)
- [ ] **Confirm test counts match verify.md**

## Success Criteria

- CHANGELOG.md created with all completed features
- Each feature has extracted content from all 5 artifacts
- Quality metrics included (if available)
- No placeholder text

## Status

Mark complete when changelog is generated and verified.
